<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <title>Buddy</title>
</head>
<body>

</body>
<template name="ApplicationLayout">
    <header>
        <h1>{{title}}</h1>
        <p><a href="/">Home</a></p>
    </header>

    <article>
        {{> yield}}
    </article>

    <footer>
        <p>This is a footer</p>
    </footer>
</template>

<template name="Home">
    <p>Dashboard</p>
    <a href="/new">Create new buddy pairing</a>
</template>


<template name="New">
    <label for="local">Locals</label><textarea name="local" rows="8" cols="40"></textarea>
    <p><a id="new-local" class="btn">Update &rarr;</a></p>
    <label for="internationals">Internationals</label><textarea name="internationals" rows="8" cols="40"></textarea>
    <p><a id="new-internationals" class="btn">Update &rarr;</a></p>
    <a class="btn btn-large" href="{{keysLink}}">Continue</a>
    {{> Responses}}
</template>

<template name="Keys">
    <h2>Local questions</h2>
    <form role="form" id="local-key" accept-charset="utf-8">
        {{#with localQuestions}}
            {{#each header}}
                {{> selectKeys}}
            {{/each}}
        {{/with}}
    <!-- <p><input type="submit" value="Save"></p> -->
    </form>
    <!-- <h2>International questions</h2> -->
    <!-- <form role="form" id="international&#45;key" accept&#45;charset="utf&#45;8"> -->
    <!--     {{#with internationalQuestions}} -->
    <!--     {{#each header}} -->
    <!--     <div class="form&#45;group"> -->
    <!--         <label for="{{question}}">{{question}}</label> -->
    <!--         <select class="international&#45;key" name="{{question}}" id="{{id}}"> -->
    <!--             {{#each internationalOptions question=question mapping=../mapping}} -->
    <!--             <option id="{{id}}" value="{{key}}" selected={{isSelected}}>{{key}}</option> -->
    <!--             {{/each}} -->
    <!--         </select> -->
    <!--     </div> -->
    <!--     {{/each}} -->
    <!--     {{/with}} -->
    <!--     <!&#45;&#45; <p><input type="submit" value="Save"></p> &#45;&#45;> -->
    <!-- </form> -->
</template>

<template name="selectKeys">
    <div class="form-group">
        <label for="{{question}}">
            <!-- TODO: add glyphicons to confirm -->
            {{question}}
            {{#if hasMapping}}
                 <span class="glyphicon glyphicon-ok-sign"></span>
                 (Ok)
            {{else}}
                 <span class="glyphicon glyphicon-info-sign"></span>
                 (Guess)
                 <a class="btn confirm-btn" data-question="{{question}}" data-type="{{../type}}">Confirm guess</a>
            {{/if}}
        </label>
        <select class="local-key" name="{{question}}" id="{{id}}">
            {{#each getOptions question=question mapping=../mapping requiredKeys=../requiredKeys}}
                <option value="{{key}}" selected={{isSelected}}>{{key}}</option>
            {{/each}}
        </select>
    </div>
</template>

<template name="Responses">
    <h2>Locals</h2>
    {{#each local}}
        {{> ResponseTable}}
    {{else}}
        <p>Use the textarea to add some data</p>
    {{/each}}
    <h2>Internationals</h2>
    {{#each internationals}}
        {{> ResponseTable}}
    {{else}}
        <p>Use the textarea to add some data</p>
    {{/each}}
    <p>You're using id {{matchingId}}</p>
</template>

<template name="ResponseTable">
    <div class="table-responsive">
        <table class="table table-condensed">
            <thead>
                <tr>
                    {{#each data.header}}
                        <th>{{this}}</th>
                    {{/each}}
                </tr>
            </thead>
            <tbody>
                {{#each data.responses}}
                <tr>
                    {{#each this}}
                        <td>
                            {{this}}
                        </td>
                    {{/each}}
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</template>



